<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Add geocoding</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
	
<style>
.menu-ui {
  background:#fff;
  position:absolute;
  top:10px;right:10px;
  z-index:1;
  border-radius:3px;
  width:120px;
  border:1px solid rgba(0,0,0,0.4);
  }
  .menu-ui a {
    font-size:13px;
    color:#404040;
    display:block;
    margin:0;padding:0;
    padding:10px;
    text-decoration:none;
    border-bottom:1px solid rgba(0,0,0,0.25);
    text-align:center;
    }
    .menu-ui a:first-child {
      border-radius:3px 3px 0 0;
      }
    .menu-ui a:last-child {
      border:none;
      border-radius:0 0 3px 3px;
      }
    .menu-ui a:hover {
      background:#f8f8f8;
      color:#404040;
      }
    .menu-ui a.active,
    .menu-ui a.active:hover {
      background:#3887BE;
      color:#FFF;
      }
</style>
<nav id="menu-ui" class="menu-ui">
  <a href="#" class='active' id='filter-all'>All events</a>
  <a href="#" id="filter-spinning">Spinning events</a>
	<a href="#" id="filter-workshop">Workshop events</a>
	<a href="#" id="filter-poi-yoga">Poi & Yoga events</a>
</nav>
<div id="map"></div>
<script>

  var map = L.mapbox.map('map', 'deezone.i95knkdl'),
     spinning = document.getElementById('filter-spinning'),
     workshop = document.getElementById('filter-workshop'),
     all = document.getElementById('filter-all');
		 
		 map.setView([39.26,-1.11], 3)
    .addControl(L.mapbox.geocoderControl('deezone.i95knkdl', {
      keepOpen: true
	   }));

	var eventsLayer = L.mapbox.featureLayer().addTo(map);
	
	var geojson = {
    type: 'FeatureCollection',
    features: [
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-87.216915, 30.421309]  /* Long , Lat */
				},
				properties: {
					title: 'Zachary Dwyer',
					description: 'Pensacola, Florida, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-123.113927, 49.261226]
				},
				properties: {
					title: 'Lars Bruheim',
					description: 'Vancouver, British Columbia, Canada<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
					/* 'url': 'http://www.playpoi.com/learn/instructional-dvds/scales-of-poi' */
				}
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-123.026208, 44.990119]
				},
				properties: {
					title: 'Crystal Areal',
					description: 'Keizer, Oregon, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-70.934205, 41.636215]
				},
				properties: {
					'title': 'Shelby Dubois-Jenness',
					'description': 'New Bedford, Mssachusetts, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-89.689286, 39.770890]
				},
				properties: {
					'title': 'Knight',
					'description': 'Springfield, Montania, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-81.655651, 30.332184]
				},
				properties: {
					'title': 'Brian Davis',
					'description': 'Jacksonville, Florida, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [153.196762, -29.456849]
				},
				properties: {
					'title': 'Jacob Buxton',
					'description': 'Maclean, New South Wales, Australia<br /><ul><li>Beginner</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [8.672434, 49.398752]
				},
				properties: {
					'title': 'Chris Martin',
					'description': 'Heidelberg, Germany<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [18.424055, -33.924869]
				},
				properties: {
					'title': 'Duncan Greenwood',
					'description': 'Cape Town, South Africa<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [103.819836, 1.352083]
				},
				properties: {
					'title': 'Max Pagel',
					'description': 'Singapore<br /><ul><li>Beginner</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-96.948894, 32.814018]
				},
				properties: {
					'title': 'Sharon Dowell',
					'description': 'Irving, Texas, United States of America<br /><ul><li>Beginner</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [77.224960, 28.635308]
				},
				properties: {
					'title': 'James Macnamara',
					'description': 'New Delhi, India<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-81.949533, 26.562854]
				},
				properties: {
					'title': 'Sean "Awesome" Ambrioso',
					'description': 'Cape Coral, Florida, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-122.121512, 47.673988]
				},
				properties: {
					'title': 'Alan Gervin',
					'description': 'Redmond, Washington, United States of America<br /><ul><li>Beginner</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [9.732010, 52.375892]
				},
				properties: {
					'title': 'Christian von Albrecht',
					'description': 'Hannover, Germany<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-88.314273, 44.265820]
				},
				properties: {
					'title': 'Cody Dalton',
					'description': 'Combined Locks, Wisconsin, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-122.676207, 45.523452]
				},
				properties: {
					'title': 'Scenethelite',
					'description': 'Portland, Oregon, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [-83.045754, 42.331427]
				},
				properties: {
					'title': 'Tina Wald',
					'description': 'Detroit ,Michigan, United States of America<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [98.993128, 18.787747]
				},
				properties: {
					'title': 'Shaun',
					'description': 'Chiang Mai, Thailand<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			},
			{
				type: 'Feature',
				geometry: {
					type: 'Point',
					coordinates: [2.352222, 48.856614]
				},
				properties: {
					'title': 'Natacha Adjovi',
					'description': 'Paris, France<br /><ul><li>Beginner</li><li>Beyond-the-Basics</li></ul>',
					'marker-color': '#f86767',
					'marker-size': 'large',
					'marker-color': '#BE9A6B',
					'marker-symbol': 'circle-stroked'
				}		
			}
		]
  };

  eventsLayer.setGeoJSON(geojson);
	
	eventsLayer.on('click', function(e) {
		var clickedPinURL = e.layer.feature.properties.url;
		if (typeof clickedPinURL !== 'undefined') {
      e.layer.unbindPopup();
      window.open(clickedPinURL);
	  }
  });
	
	spinning.onclick = function(e) {
    all.className = '';
    this.className = 'active';
    // The setFilter function takes a GeoJSON feature object
    // and returns true to show it or false to hide it.
    map.featureLayer.setFilter(function(f) {
      return f.properties['marker-symbol'] === 'circle-stroked';
    });
    return false;
  };
	
	workshop.onclick = function(e) {
    all.className = '';
    this.className = 'active';
    map.featureLayer.setFilter(function(f) {
      return f.properties['marker-symbol'] === 'circle';
    });
    return false;
  };

  all.onclick = function() {
    spinning.className = '';
		workshop.className = '';
    this.className = 'active';
    map.featureLayer.setFilter(function(f) {
      // Returning true for all markers shows everything.
      return true;
    });
    return false;
    };

</script>
</body>
</html>
